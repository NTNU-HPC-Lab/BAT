{
    "general": {
        "formatVersion": "0.0.1",
        "benchmarkName": "hotspot",
        "benchmarksPath": "src/benchmarks"
    },
    "configurationSpace": {
        "tuningParameters": [
            {
                "name": "BLOCK_SIZE_X",
                "type": "int",
                "values": "[1, 2, 4, 8, 16] + list(range(32, 1024+1, 32))",
                "default": 256
            },
            {
                "name": "BLOCK_SIZE_Y",
                "type": "int",
                "values": "[2**i for i in range(0, 6)]",
                "default": 1
            },
            {
                "name": "TILE_SIZE_X",
                "type": "int",
                "values": "[i for i in range(1, 11)]",
                "default": 1
            },
            {
                "name": "TILE_SIZE_Y",
                "type": "int",
                "values": "[i for i in range(1, 11)]",
                "default": 1
            },
            {
                "name": "TEMPORAL_TILING_FACTOR",
                "type": "int",
                "values": "[i for i in range(1, 11)]",
                "default": 1
            },
            {
                "name": "MAX_TFACTOR",
                "type": "int",
                "values": "[10]",
                "default": 1
            },
            {
                "name": "LOOP_UNROLL_FACTOR_T",
                "type": "int",
                "values": "[i for i in range(1, 10+1)]",
                "default": 1
            },
            {
                "name": "SH_POWER",
                "type": "int",
                "values": "[0, 1]",
                "default": 1
            },
            {
                "name": "BLOCKS_PER_SM",
                "type": "int",
                "values": "[0, 1, 2, 3, 4]",
                "default": 1
            }
        ],
		"constraints": [
            "BLOCK_SIZE_X*BLOCK_SIZE_Y>= 32",
            "TEMPORAL_TILING_FACTOR % LOOP_UNROLL_FACTOR_T == 0",
            "BLOCK_SIZE_X*BLOCK_SIZE_Y <= MAX_THREADS",
            "(BLOCK_SIZE_X*TILE_SIZE_X+ TEMPORAL_TILING_FACTOR * 2) * (BLOCK_SIZE_Y*TILE_SIZE_Y+ TEMPORAL_TILING_FACTOR * 2) * (2+SH_POWER) * 4 <= MAX_SHARED_MEMORY_BLOCK",
            "BLOCKS_PER_SM == 0 or (((BLOCK_SIZE_X*TILE_SIZE_X+ TEMPORAL_TILING_FACTOR * 2) * (BLOCK_SIZE_Y*TILE_SIZE_Y +  TEMPORAL_TILING_FACTOR * 2) * (2+SH_POWER) * 4) * BLOCKS_PER_SM <= MAX_SHARED_MEMORY)"
        ]
    },
    "benchmarkConfig": {
      "dataSize": 4096,
      "iterations": 10,
      "MAX_THREADS": 512,
      "MAX_SHARED_MEMORY_BLOCK": 256,
      "MAX_SHARED_MEMORY": 1024
    },
    "kernelSpecification": {
        "language": "CUDA",
        "compilerOptions": ["-std=c++11"],
        "benchmarkPath": "src/benchmarks",
        "benchmarkName": "hotspot",
        "kernelName": "calculate_temp",
        "kernelFile": "hotspot_kernel.cu",
        "blockSize": {
            "X": "BLOCK_SIZE_X",
            "Y": "BLOCK_SIZE_Y",
            "Z": 1
        },
        "gridSize": {
            "X": "(4096 + BLOCK_SIZE_X - 1) // BLOCK_SIZE_X",
            "Y": 1,
            "Z": 1
        },
        "sharedMemory": null,
        "stream": null,
        "arguments": [
        {
            "name": "lhs",
            "type": "double3",
            "length": 4096,
            "memoryType": "Vector",
            "accessType": "ReadOnly",
            "fillType": "random"
        },
        {
            "name": "rhs",
            "type": "double3",
            "length": 1,
            "memoryType": "Vector",
            "accessType": "ReadOnly",
            "fillType": "random"
        },
        {
          "name": "out",
          "type": "double3",
          "length": 4096,
          "memoryType": "Vector",
          "accessType": "ReadWrite",
          "fillType": "uninitialized"
        },
        {
          "name": "N",
          "type": "int",
          "memoryType": "Scalar",
          "accessType": "ReadOnly",
          "value": "4096"
        }
      ]
    },
  "metadata": {
    "types": {
      "float3": {
        "x": "float",
        "y": "float",
        "z": "float"
      },
      "float4": {
        "x": "float",
        "y": "float",
        "z": "float",
        "w": "float"
      },
      "double3": {
        "x": "double",
        "y": "double",
        "z": "double"
      },
      "double4": {
        "x": "double",
        "y": "double",
        "z": "double",
        "w": "double"
      }
    }
  },
    "verification": {
        "type": "reference_CPU",
        "path": "/path/reference.cpp"
    }
}
  
